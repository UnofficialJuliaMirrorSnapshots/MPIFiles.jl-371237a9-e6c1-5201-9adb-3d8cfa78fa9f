<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Measurements · MPI Files</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link href="assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><a href="index.html"><img class="logo" src="assets/logo.png" alt="MPI Files logo"/></a><h1>MPI Files</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="search.html"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="index.html">Home</a></li><li><a class="toctext" href="gettingStarted.html">Getting Started</a></li><li><a class="toctext" href="lowlevel.html">Low Level Interface</a></li><li><a class="toctext" href="conversion.html">Conversion</a></li><li class="current"><a class="toctext" href="measurements.html">Measurements</a><ul class="internal"></ul></li><li><a class="toctext" href="systemmatrix.html">System Matrix</a></li><li><a class="toctext" href="frequencyFilter.html">Frequency Filter</a></li><li><a class="toctext" href="images.html">Reconstructions</a></li></ul></nav><article id="docs"><header><nav><ul><li><a href="measurements.html">Measurements</a></li></ul><a class="edit-page" href="https://github.com/MagneticParticleImaging/MPIFiles.jl/blob/master/docs/src/measurements.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Measurements</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Measurements-1" href="#Measurements-1">Measurements</a></h1><p>The low level interface allows to load measured MPI data via the <code>measData</code> function. The returned data is exactly how it is stored on disc. This has the disadvantage that the user needs to handle different sorts of data that can be stored in the <code>measData</code> field. To cope with this issue, the MDF also has a high level interface for loading measurement data. The first is the function</p><pre><code class="language-julia">function getMeasurements(f::MPIFile, neglectBGFrames=true;
                frames=neglectBGFrames ? (1:acqNumFGFrames(f)) : (1:acqNumFrames(f)),
                numAverages=1,
                bgCorrection=false,
                interpolateBG=false,
                tfCorrection=measIsTFCorrected(f),
                sortFrames=false,
                spectralLeakageCorrection=true,
                kargs...)</code></pre><p>that loads the MPI data in time domain. Background frames can be neglected or included, frames can be selected by specifying <code>frames</code>, block averaging can be applied by specifying <code>numAverages</code>, <code>bgCorrection</code> allows to apply background correction, <code>tfCorrection</code> allows for a correction of the transfer function, <code>interpolateBG</code> applies an optional interpolation in case that multiple background intervals are included in the measurement, <code>sortFrames</code> puts all background frames to the end of the returned data file, and <code>spectralLeakageCorrection</code> controls whether a spectral leakage correction is applied.</p><p>The array returned by <code>getMeasurements</code> is of type <code>Float32</code> and has four dimensions</p><ol><li>time dimension (over one period)</li><li>receive channel dimension</li><li>patch dimension</li><li>frame dimension</li></ol><p>Instead of loading the data in time domain, one can also load the frequency domain data by calling</p><pre><code class="language-julia">function getMeasurementsFD(f::MPIFile, neglectBGFrames=true;
                  loadasreal=false,
                  transposed=false,
                  frequencies=nothing,
                  tfCorrection=measIsTFCorrected(f),
                  kargs...)</code></pre><p>The function has basically the same parameters as <code>getMeasurements</code> but additionally it is possible to load the data in real form (useful when using a solver that cannot handle complex numbers), it is possible to specify the frequencies (specified by the indices) that should be loaded, and it is possible to transpose the data in a special way, where the frame dimension is changed to be the first dimension. <code>getMeasurementsFD</code> returns a 4D array where of type <code>ComplexF32</code> with dimensions</p><ol><li>frequency dimension</li><li>receive channel dimension</li><li>patch dimension</li><li>frame dimension</li></ol><footer><hr/><a class="previous" href="conversion.html"><span class="direction">Previous</span><span class="title">Conversion</span></a><a class="next" href="systemmatrix.html"><span class="direction">Next</span><span class="title">System Matrix</span></a></footer></article></body></html>
